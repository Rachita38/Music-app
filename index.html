<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title> Song App</title>
    
    <link rel="stylesheet" type="text/css" href="main.css">
    
    <!-- Style sheet to add audio control icons-->
    <link href="https://use.fontawesome.com/releases/v5.0.8/css/all.css" rel="stylesheet">
</head>

<body onkeydown="playsong(event);">

<div class="wrapper">
        
<!--The welcome screen, which asks for user information-->
        
        <section class="welcome-screen">
                    
                    <h1> Welcome to Songify </h1>
                                
            <div class="input-wrapper">
                
                    <fieldset>
                        <legend><h3>Enter User-Name and Password:</h3></legend>
                          <input type="text" placeholder="Enter User Name" id="name-input" value="rachita">
                          <input type="password" placeholder="Enter Password" id="password-input">
                        <button> Go </button>
                    </fieldset>
                
            </div>
       
        </section>
        
<!-- The main screen, when the user logs in -->
        
        <div class="main hidden">
            <header>
                <div class="right floated user-name"> 
                </div>
                <button id="logout">Log-out</button>
            </header>
            
            <section class="content">
                <audio src="song.mp3"></audio>
            </section>
            
            <footer>
            
            <div>
                <!--Displays the Progress bar for the song-->
                <div class="progress-wrapper">
                        <span class="time-elapsed"> </span>
                        <div class="player-progress">
                            <div class="progress-filled"> </div>
                        </div>
                        <span class="song-duration"></span>
                </div>
                 
                 <!--Displays the Play icon for the song-->
                <div class="player-buttons">
                    <i class="fa fa-play clickable play-icon"></i>
                </div>
                       
            
            </div>
           </footer>
            
        </div>
</div>
    
     <script src="jquery.js"> </script> 
    
    <script>
        // This function converts seconds into minutes.
        function fancyTimeFormat(time)
        {   
                            // Hours, minutes and seconds
                            var hrs =Math.floor(time / 3600);
                            var mins = Math.floor((time % 3600) / 60);
                            var secs = time % 60;

                            // Output like "1:01" or "4:03:59" or "123:03:59"
                            var ret = "";

                            if (hrs > 0) {
                                ret += "" + hrs + ":" + (mins < 10 ? "0" : "");
                            }

                            ret += "" + mins + ":" + (secs < 10 ? "0" : "");
                            ret += "" + secs;
                            return ret;
        }
       
     
        // This function shows the amount of time elapsed and the song duration
        function updateCurrentTime(){
                                          var song = document.querySelector('audio');
                                            var currentTime = Math.floor(song.currentTime);
                                            currentTime = fancyTimeFormat(currentTime);
                                            
                                            var duration = Math.floor(song.duration);
                                            duration = fancyTimeFormat(duration)
                                            
                                            $('.time-elapsed').text(currentTime);
                                            $('.song-duration').text(duration);
                                    }

       
        //Created a Function to play and pause the song, and the play/pause icon changes accordingly.
        function togglesong(){
             
            var song = document.querySelector('audio');
                                                          
                                    if(song.paused == true){
                                                            
                                                            $('.play-icon').removeClass('fa-play');
                                                            $('.play-icon').addClass('fa-pause');
                                                            song.play();
                                                            }
                                                        
                                                        else{
                                                            
                                                            $('.play-icon').removeClass('fa-pause');
                                                            $('.play-icon').addClass('fa-play');
                                                            song.pause();
                                                            }
            updateCurrentTime();
            setInterval(function(){
                                updateCurrentTime();
                                },1000);
            
        }
            
        //jQuery Code for validating user-name and displaying welcome message
        
            $('.welcome-screen button').on('click', function() {
            
                var name = $('#name-input').val();
            
                if(name.length > 2) {
                                        var message = "Welcome, " +  name;
                                        
                                        //Displaying welcome message in the main class
                                        
                                        $('.main .user-name').text(message);
                                        $('.welcome-screen').addClass('hidden');
                                        $('.main').removeClass('hidden');
                                    } 
                    else{
                            $('#name-input').addClass('error');
                        }
            
           });
        
        
        //jQuery code to allow the user to log-out and go-back to the Welcome Screen
            
            $('#logout').on('click',function(){

                $('.welcome-screen').removeClass('hidden');
                $('.main').addClass('hidden');


            });
                
                //jQuery code to play and pause the song, when the user clicks on the Play button.
        
               $('.play-icon').on('click',function(){
                                                        togglesong();
                }); 
        
                
                //Function to play or pause the song using spacebar and the P key.
                function playsong(e){
                                      if((e.keyCode == 32)||(e.keyCode == 80))
                                      {
                                          togglesong();
                                      }
                            
                                    }
    
            
        
    </script>
</body>
</html>